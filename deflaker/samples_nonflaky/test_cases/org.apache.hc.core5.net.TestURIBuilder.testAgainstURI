@Test
public void testAgainstURI() throws Exception {
    // Check that the URI generated by URI builder agrees with that generated by using URI directly
    final String scheme = "https";
    final String host = "localhost";
    // N.B. excludes space
    final String specials = "/abcd!$&*()_-+.,=:;'~@[]?<>|#^%\"{}\\\u00a3`\u00ac\u00a6xyz";
    final URI uri = new URI(scheme, specials, host, 80, specials, specials, specials);
    final URI bld = new URIBuilder().setScheme(scheme).setHost(host).setUserInfo(specials).setPath(specials).setCustomQuery(specials).setFragment(specials).build();
    Assert.assertEquals(uri.getHost(), bld.getHost());
    Assert.assertEquals(uri.getUserInfo(), bld.getUserInfo());
    Assert.assertEquals(uri.getPath(), bld.getPath());
    Assert.assertEquals(uri.getQuery(), bld.getQuery());
    Assert.assertEquals(uri.getFragment(), bld.getFragment());
}
