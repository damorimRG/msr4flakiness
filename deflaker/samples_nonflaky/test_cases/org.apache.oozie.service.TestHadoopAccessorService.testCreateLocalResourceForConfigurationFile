public void testCreateLocalResourceForConfigurationFile() throws Exception {
    HadoopAccessorService has = Services.get().get(HadoopAccessorService.class);
    String filename = "foo.xml";
    Configuration conf = has.createConfiguration(getNameNodeUri());
    conf.set("foo", "bar");
    LocalResource lRes = has.createLocalResourceForConfigurationFile(filename, getTestUser(), conf, getFileSystem().getUri(), getFsTestCaseDir());
    assertNotNull(lRes);
    assertEquals(LocalResourceType.FILE, lRes.getType());
    assertEquals(LocalResourceVisibility.APPLICATION, lRes.getVisibility());
    Path resPath = ConverterUtils.getPathFromYarnURL(lRes.getResource());
    assertEquals(new Path(getFsTestCaseDir(), "foo.xml"), resPath);
    Configuration conf2 = new Configuration(false);
    conf2.addResource(getFileSystem().open(resPath));
    assertEquals("bar", conf2.get("foo"));
}
