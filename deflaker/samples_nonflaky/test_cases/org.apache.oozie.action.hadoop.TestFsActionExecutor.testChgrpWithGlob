public void testChgrpWithGlob() throws Exception {
    String testUser = getTestUser();
    String testGroup = getTestGroup();
    String testGroup2 = getTestGroup2();
    FsActionExecutor ae = new FsActionExecutor();
    FileSystem fs = getFileSystem();
    Context context = createContext("<fs/>");
    Path basePath = new Path(getFsTestCaseDir(), "2010");
    createTestDirForChgrp(basePath, fs);
    Path globPath = new Path(basePath + "/1[0-1]");
    ae.chgrp(context, null, null, globPath, testUser, testGroup2, false, false);
    assertEquals(testGroup2, fs.getFileStatus(new Path(basePath, "10")).getGroup().toString());
    assertEquals(testGroup2, fs.getFileStatus(new Path(basePath, "11")).getGroup().toString());
    assertEquals(testGroup, fs.getFileStatus(new Path(basePath, "12")).getGroup().toString());
    assertEquals(testGroup, fs.getFileStatus(new Path(basePath + "/10/dir1")).getGroup().toString());
    assertEquals(testGroup, fs.getFileStatus(new Path(basePath + "/10/dir2")).getGroup().toString());
    assertEquals(testGroup, fs.getFileStatus(new Path(basePath + "/11/dir3")).getGroup().toString());
    assertEquals(testGroup, fs.getFileStatus(new Path(basePath + "/10/dir1/file1")).getGroup().toString());
    ae.chgrp(context, null, null, globPath, testUser, testGroup2, true, false);
    assertEquals(testGroup2, fs.getFileStatus(new Path(basePath, "10")).getGroup().toString());
    assertEquals(testGroup2, fs.getFileStatus(new Path(basePath, "11")).getGroup().toString());
    assertEquals(testGroup, fs.getFileStatus(new Path(basePath, "12")).getGroup().toString());
    assertEquals(testGroup2, fs.getFileStatus(new Path(basePath + "/10/dir1")).getGroup().toString());
    assertEquals(testGroup2, fs.getFileStatus(new Path(basePath + "/10/dir2")).getGroup().toString());
    assertEquals(testGroup2, fs.getFileStatus(new Path(basePath + "/11/dir3")).getGroup().toString());
    assertEquals(testGroup, fs.getFileStatus(new Path(basePath + "/10/dir1/file1")).getGroup().toString());
    ae.chgrp(context, null, null, globPath, testUser, testGroup2, true, true);
    assertEquals(testGroup2, fs.getFileStatus(new Path(basePath, "10")).getGroup().toString());
    assertEquals(testGroup2, fs.getFileStatus(new Path(basePath, "11")).getGroup().toString());
    assertEquals(testGroup, fs.getFileStatus(new Path(basePath, "12")).getGroup().toString());
    assertEquals(testGroup2, fs.getFileStatus(new Path(basePath + "/10/dir1")).getGroup().toString());
    assertEquals(testGroup2, fs.getFileStatus(new Path(basePath + "/10/dir2")).getGroup().toString());
    assertEquals(testGroup2, fs.getFileStatus(new Path(basePath + "/11/dir3")).getGroup().toString());
    assertEquals(testGroup2, fs.getFileStatus(new Path(basePath + "/10/dir1/file1")).getGroup().toString());
    fs.delete(basePath, true);
}
