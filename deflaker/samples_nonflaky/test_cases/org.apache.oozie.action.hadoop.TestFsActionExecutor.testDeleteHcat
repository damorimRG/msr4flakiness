public void testDeleteHcat() throws Exception {
    // setting current user as test user because directory structure created by HCat have current user permissions (755).
    setSystemProperty(XTestCase.TEST_USER1_PROP, System.getProperty("user.name"));
    createTestTable();
    addPartition(db, table, "year=2012;month=12;dt=02;country=us");
    URI hcatURI = getHCatURI(db, table, "country=us;year=2012;month=12;dt=02");
    URIHandler handler = uriService.getURIHandler(hcatURI);
    FsActionExecutor ae = new FsActionExecutor();
    Path path = new Path(hcatURI);
    Path nameNodePath = new Path(getNameNodeUri());
    Context context = createContext("<fs/>");
    XConfiguration conf = new XConfiguration();
    assertTrue(handler.exists(hcatURI, conf, getTestUser()));
    ae.delete(context, conf, nameNodePath, path, true);
    assertFalse(handler.exists(hcatURI, conf, getTestUser()));
}
