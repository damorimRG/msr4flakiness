// We won't test actually using it to authenticate because that gets messy and may conflict with other tests; but we can test
// that it otherwise behaves correctly
public void test() throws Exception {
    String krb5LoginModuleName;
    if (System.getProperty("java.vendor").contains("IBM")) {
        krb5LoginModuleName = "com.ibm.security.auth.module.Krb5LoginModule";
    } else {
        krb5LoginModuleName = "com.sun.security.auth.module.Krb5LoginModule";
    }
    JaasConfiguration.clearEntries();
    assertTrue(JaasConfiguration.getEntries().isEmpty());
    JaasConfiguration.addEntry("foo", "foo/localhost", "/some/location/foo");
    assertEquals(1, JaasConfiguration.getEntries().size());
    JaasConfiguration.addEntry("bar", "bar/localhost", "/some/location/bar");
    assertEquals(2, JaasConfiguration.getEntries().size());
    JaasConfiguration.addEntry("zoo", "zoo/localhost", "/some/location/zoo");
    assertEquals(3, JaasConfiguration.getEntries().size());
    checkEntry(krb5LoginModuleName, "foo", "foo/localhost", "/some/location/foo");
    checkEntry(krb5LoginModuleName, "bar", "bar/localhost", "/some/location/bar");
    checkEntry(krb5LoginModuleName, "zoo", "zoo/localhost", "/some/location/zoo");
    JaasConfiguration.removeEntry("bar");
    assertEquals(2, JaasConfiguration.getEntries().size());
    checkEntry(krb5LoginModuleName, "foo", "foo/localhost", "/some/location/foo");
    checkEntry(krb5LoginModuleName, "zoo", "zoo/localhost", "/some/location/zoo");
    JaasConfiguration.clearEntries();
    assertTrue(JaasConfiguration.getEntries().isEmpty());
}
