public void testConfiguration() throws Exception {
    Configuration conf = new Configuration(false);
    conf.set(LauncherAMCallbackNotifier.OOZIE_LAUNCHER_CALLBACK_MAX_ATTEMPTS, "0");
    conf.set(LauncherAMCallbackNotifier.OOZIE_LAUNCHER_CALLBACK_RETRY_ATTEMPTS, "10");
    LauncherAMCallbackNotifier cn = new LauncherAMCallbackNotifier(conf);
    assertEquals(0, cn.numTries);
    conf.set(LauncherAMCallbackNotifier.OOZIE_LAUNCHER_CALLBACK_MAX_ATTEMPTS, "1");
    cn = new LauncherAMCallbackNotifier(conf);
    assertEquals(1, cn.numTries);
    conf.set(LauncherAMCallbackNotifier.OOZIE_LAUNCHER_CALLBACK_MAX_ATTEMPTS, "20");
    cn = new LauncherAMCallbackNotifier(conf);
    // 11 because number of _retries_ is 10
    assertEquals(11, cn.numTries);
    conf.set(LauncherAMCallbackNotifier.OOZIE_LAUNCHER_CALLBACK_RETRY_INTERVAL, "1000");
    cn = new LauncherAMCallbackNotifier(conf);
    assertEquals(1000, cn.waitInterval);
    conf.set(LauncherAMCallbackNotifier.OOZIE_LAUNCHER_CALLBACK_RETRY_INTERVAL, "10000");
    cn = new LauncherAMCallbackNotifier(conf);
    assertEquals(5000, cn.waitInterval);
    // Test negative numbers are set to default
    conf.set(LauncherAMCallbackNotifier.OOZIE_LAUNCHER_CALLBACK_RETRY_INTERVAL, "-10");
    cn = new LauncherAMCallbackNotifier(conf);
    assertEquals(5000, cn.waitInterval);
    conf.set(LauncherAMCallbackNotifier.OOZIE_LAUNCHER_CALLBACK_TIMEOUT, "1000");
    cn = new LauncherAMCallbackNotifier(conf);
    assertEquals(1000, cn.timeout);
    conf.set(LauncherAMCallbackNotifier.OOZIE_LAUNCHER_CALLBACK_PROXY, "somehost");
    cn = new LauncherAMCallbackNotifier(conf);
    assertEquals(Proxy.Type.DIRECT, cn.proxyToUse.type());
    conf.set(LauncherAMCallbackNotifier.OOZIE_LAUNCHER_CALLBACK_PROXY, "somehost:someport");
    cn = new LauncherAMCallbackNotifier(conf);
    assertEquals(Proxy.Type.DIRECT, cn.proxyToUse.type());
    conf.set(LauncherAMCallbackNotifier.OOZIE_LAUNCHER_CALLBACK_PROXY, "somehost:1000");
    cn = new LauncherAMCallbackNotifier(conf);
    assertEquals("HTTP @ somehost:1000", cn.proxyToUse.toString());
    conf.set(LauncherAMCallbackNotifier.OOZIE_LAUNCHER_CALLBACK_PROXY, "socks@somehost:1000");
    cn = new LauncherAMCallbackNotifier(conf);
    assertEquals("SOCKS @ somehost:1000", cn.proxyToUse.toString());
    conf.set(LauncherAMCallbackNotifier.OOZIE_LAUNCHER_CALLBACK_PROXY, "SOCKS@somehost:1000");
    cn = new LauncherAMCallbackNotifier(conf);
    assertEquals("SOCKS @ somehost:1000", cn.proxyToUse.toString());
    conf.set(LauncherAMCallbackNotifier.OOZIE_LAUNCHER_CALLBACK_PROXY, "sfafn@somehost:1000");
    cn = new LauncherAMCallbackNotifier(conf);
    assertEquals("HTTP @ somehost:1000", cn.proxyToUse.toString());
}
