@Test
public void testOnRemoveUserWithMembership() throws Exception {
    User u = getTestUser();
    gr.addMember(u);
    root.commit();
    action.onRemove(u, root, NamePathMapper.DEFAULT);
    assertTrue(root.hasPendingChanges());
    assertFalse(gr.isDeclaredMember(u));
}
