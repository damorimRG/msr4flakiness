@Test
public void keepAlive() throws Exception {
    Map<String, Object> config = newConfig(repoHome);
    config.put(DocumentNodeStoreServiceConfiguration.PROP_SO_KEEP_ALIVE, true);
    MockOsgi.setConfigForPid(context.bundleContext(), PID, config);
    MockOsgi.activate(service, context.bundleContext());
    DocumentNodeStore store = context.getService(DocumentNodeStore.class);
    MongoDocumentStore mds = getMongoDocumentStore(store);
    MongoClient client = MongoDocumentStoreTestHelper.getClient(mds);
    assertTrue(client.getMongoClientOptions().isSocketKeepAlive());
}
