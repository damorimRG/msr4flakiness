public void testKill() throws Exception {
    String actionXml = "<java>" + "<job-tracker>" + getJobTrackerUri() + "</job-tracker>" + "<name-node>" + getNameNodeUri() + "</name-node>" + "<main-class>" + LauncherMainTester.class.getName() + "</main-class>" + "</java>";
    final Context context = createContext(actionXml, null);
    final String runningJob = submitAction(context);
    ActionExecutor ae = new JavaActionExecutor();
    ae.kill(context, context.getAction());
    assertEquals(WorkflowAction.Status.DONE, context.getAction().getStatus());
    assertEquals("KILLED", context.getAction().getExternalStatus());
    assertTrue(ae.isCompleted(context.getAction().getExternalStatus()));
    waitUntilYarnAppKilledAndAssertSuccess(runningJob);
}
