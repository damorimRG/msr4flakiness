@Test
public void testValidateUnsupportedRestriction() throws Exception {
    RestrictionProvider rp = CompositeRestrictionProvider.newInstance(rp1, rp3);
    Tree aceNode = TreeUtil.addChild(root.getTree("/"), "test", NT_REP_GRANT_ACE);
    Tree rNode = TreeUtil.addChild(aceNode, REP_RESTRICTIONS, NT_REP_RESTRICTIONS);
    rNode.setProperty("unsupported", "value");
    try {
        rp.validateRestrictions("/test", aceNode);
        fail("Validation must detect unsupported restriction");
    } catch (AccessControlException e) {
    // success
    }
}
