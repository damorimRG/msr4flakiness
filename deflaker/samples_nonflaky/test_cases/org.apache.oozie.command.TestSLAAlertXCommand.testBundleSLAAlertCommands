public void testBundleSLAAlertCommands() throws Exception {
    setupSLAJobs();
    String jobIdsStr = bundle.getId();
    String actions = "1,2";
    String coords = null;
    bundleEngine.disableSLAAlert(jobIdsStr, actions, null, coords);
    checkSLAStatus(coord1.getId() + "@1", true);
    checkSLAStatus(coord1.getId() + "@2", true);
    checkSLAStatus(coord1.getId() + "@3", false);
    checkSLAStatus(coord1.getId() + "@5", false);
    checkSLAStatus(coord1.getId() + "@4", false);
    checkSLAStatus(coord2.getId() + "@1", true);
    checkSLAStatus(coord2.getId() + "@1", true);
    bundleEngine.enableSLAAlert(jobIdsStr, null, null, null);
    checkSLAStatus(coord1.getId() + "@1", false);
    checkSLAStatus(coord1.getId() + "@2", false);
    checkSLAStatus(coord1.getId() + "@3", false);
    checkSLAStatus(coord1.getId() + "@5", false);
    checkSLAStatus(coord1.getId() + "@4", false);
    checkSLAStatus(coord2.getId() + "@1", false);
    checkSLAStatus(coord2.getId() + "@2", false);
    CoordinatorJobBean job1 = CoordJobQueryExecutor.getInstance().get(CoordJobQueryExecutor.CoordJobQuery.GET_COORD_JOB, coord1.getId());
    XConfiguration xConf = new XConfiguration(new StringReader(job1.getConf()));
    assertEquals(xConf.get(OozieClient.SLA_DISABLE_ALERT), null);
    CoordinatorJobBean job2 = CoordJobQueryExecutor.getInstance().get(CoordJobQueryExecutor.CoordJobQuery.GET_COORD_JOB, coord2.getId());
    xConf = new XConfiguration(new StringReader(job2.getConf()));
    assertEquals(xConf.get(OozieClient.SLA_DISABLE_ALERT), null);
    bundleEngine.disableSLAAlert(jobIdsStr, null, null, "coord1");
    checkSLAStatus(coord1.getId() + "@1", true);
    checkSLAStatus(coord1.getId() + "@2", true);
    checkSLAStatus(coord1.getId() + "@3", true);
    checkSLAStatus(coord1.getId() + "@4", true);
    checkSLAStatus(coord1.getId() + "@5", true);
    checkSLAStatus(coord2.getId() + "@1", false);
    checkSLAStatus(coord2.getId() + "@2", false);
    job1 = CoordJobQueryExecutor.getInstance().get(CoordJobQueryExecutor.CoordJobQuery.GET_COORD_JOB, coord1.getId());
    xConf = new XConfiguration(new StringReader(job1.getConf()));
    assertEquals(xConf.get(OozieClient.SLA_DISABLE_ALERT), SLAOperations.ALL_VALUE);
    bundleEngine.disableSLAAlert(jobIdsStr, null, null, "coord2");
    // with multiple coordID.
    String dates = "2014-01-01T00:00Z::2014-01-03T00:00Z";
    bundleEngine.enableSLAAlert(jobIdsStr, null, dates, "coord1," + coord2.getId());
    checkSLAStatus(coord1.getId() + "@1", false);
    checkSLAStatus(coord1.getId() + "@2", false);
    checkSLAStatus(coord1.getId() + "@3", false);
    checkSLAStatus(coord1.getId() + "@4", true);
    checkSLAStatus(coord1.getId() + "@5", true);
    checkSLAStatus(coord2.getId() + "@1", false);
    checkSLAStatus(coord2.getId() + "@2", false);
    checkSLAStatus(coord2.getId() + "@3", false);
    checkSLAStatus(coord2.getId() + "@4", true);
    try {
        bundleEngine.disableSLAAlert(jobIdsStr, null, null, "dummy");
        fail("Should throw Exception");
    } catch (BaseEngineException e) {
        assertEquals(e.getErrorCode(), ErrorCode.E1026);
    }
}
