/**
 * Test lookup materialization for catchup jobs
 *
 * @throws Exception
 */
public void testMaterializationLookupDaysFixedDate() throws Exception {
    // test with days
    Date startTime = DateUtils.parseDateOozieTZ("2009-02-01T01:00Z");
    Date endTime = DateUtils.parseDateOozieTZ("2009-05-03T23:59Z");
    CoordinatorJobBean job = addRecordToCoordJobTable(CoordinatorJob.Status.PREP, startTime, endTime, false, false, 0);
    job.setNextMaterializedTime(startTime);
    job.setMatThrottling(3);
    job.setFrequency("1");
    job.setTimeUnitStr("DAY");
    CoordJobQueryExecutor.getInstance().executeUpdate(CoordJobQuery.UPDATE_COORD_JOB, job);
    new CoordMaterializeTransitionXCommand(job.getId(), hoursToSeconds(1)).call();
    job = jpaService.execute(new CoordJobGetJPAExecutor(job.getId()));
    assertEquals(new Date(startTime.getTime() + TIME_IN_DAY * 3), job.getNextMaterializedTime());
}
