@Test
public void testDrainBuffersFast() throws Exception {
    checkSampleStringWithDifferentMaxLength(new StringAndIntProcessingCallback() {

        public void call(String sampleString, int suggestedMaxLength) throws IOException, InterruptedException {
            checkDrainBufferFast(sampleString, "", suggestedMaxLength);
            checkDrainBufferFast("", sampleString.toLowerCase(), suggestedMaxLength);
            checkDrainBufferFast(sampleString, sampleString.toLowerCase(), suggestedMaxLength);
        }
    });
}
