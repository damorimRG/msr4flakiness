// Testcase to check status for coord whose enddate is set before startdate.
public void testCoordChangeEndTimeBeforeStart() throws Exception {
    Date start = new Date();
    // 4 hrs
    Date end = new Date(start.getTime() + (4 * HOURS_IN_MS));
    Date endTime = new Date(start.getTime() - 3000);
    String endTimeChangeStr = "endtime=" + DateUtils.formatDateOozieTZ(endTime);
    final CoordinatorJobBean job = addRecordToCoordJobTableForPauseTimeTest(CoordinatorJob.Status.PREP, start, end, end, true, false, 0);
    JPAService jpaService = Services.get().get(JPAService.class);
    CoordJobGetJPAExecutor coordGetCmd = new CoordJobGetJPAExecutor(job.getId());
    CoordinatorJobBean coordJob = jpaService.execute(coordGetCmd);
    assertEquals(Job.Status.PREP, coordJob.getStatus());
    assertEquals(0, coordJob.getLastActionNumber());
    new CoordChangeXCommand(job.getId(), endTimeChangeStr).call();
    coordGetCmd = new CoordJobGetJPAExecutor(job.getId());
    coordJob = jpaService.execute(coordGetCmd);
    assertEquals(DateUtils.formatDateOozieTZ(coordJob.getEndTime()), DateUtils.formatDateOozieTZ(endTime));
    assertEquals(Job.Status.SUCCEEDED, coordJob.getStatus());
    Date newEndTime = new Date(start.getTime() - 2000);
    endTimeChangeStr = "endtime=" + DateUtils.formatDateOozieTZ(newEndTime);
    new CoordChangeXCommand(job.getId(), endTimeChangeStr).call();
    coordGetCmd = new CoordJobGetJPAExecutor(job.getId());
    coordJob = jpaService.execute(coordGetCmd);
    assertEquals(DateUtils.formatDateOozieTZ(coordJob.getEndTime()), DateUtils.formatDateOozieTZ(newEndTime));
    assertEquals(Job.Status.SUCCEEDED, coordJob.getStatus());
    // setting end date after startdate should make coord in running state
    newEndTime = new Date(start.getTime() + (4 * 60 * 60 * 1000));
    endTimeChangeStr = "endtime=" + DateUtils.formatDateOozieTZ(newEndTime);
    new CoordChangeXCommand(job.getId(), endTimeChangeStr).call();
    coordGetCmd = new CoordJobGetJPAExecutor(job.getId());
    coordJob = jpaService.execute(coordGetCmd);
    assertEquals(DateUtils.formatDateOozieTZ(coordJob.getEndTime()), DateUtils.formatDateOozieTZ(newEndTime));
    assertEquals(Job.Status.RUNNING, coordJob.getStatus());
    // setting end date before startdate should make coord in SUCCEEDED state
    newEndTime = new Date(start.getTime() - 1000);
    endTimeChangeStr = "endtime=" + DateUtils.formatDateOozieTZ(newEndTime);
    new CoordChangeXCommand(job.getId(), endTimeChangeStr).call();
    coordGetCmd = new CoordJobGetJPAExecutor(job.getId());
    coordJob = jpaService.execute(coordGetCmd);
    assertEquals(DateUtils.formatDateOozieTZ(coordJob.getEndTime()), DateUtils.formatDateOozieTZ(newEndTime));
    assertEquals(Job.Status.SUCCEEDED, coordJob.getStatus());
}
