@Test
public void testActionThrowsSecurityExceptionWithExitCode1() throws Exception {
    setupArgsForMainClass(SECURITY_EXCEPTION);
    given(launcherSecurityManagerMock.getExitInvoked()).willReturn(true);
    given(launcherSecurityManagerMock.getExitCode()).willReturn(1);
    executeLauncher();
    failureDetails.expectedExceptionMessage(null).expectedErrorCode(EXIT_CODE_1).expectedErrorReason("exit code [" + EXIT_CODE_1 + "]").withoutStackTrace();
    assertFailedExecution();
}
