public void testCoordFromBundleJobChangeDefinition() throws Exception {
    final XConfiguration jobConf = new XConfiguration();
    String coordJobId = setUpBundleAndGetCoordID(jobConf);
    CoordinatorJobBean job = getCoordJobs(coordJobId);
    Element processedJobXml = XmlUtils.parseXml(job.getJobXml());
    Namespace namespace = processedJobXml.getNamespace();
    String text = ((Element) processedJobXml.getChild("input-events", namespace).getChild("data-in", namespace).getChildren("instance", namespace).get(0)).getText();
    assertEquals(text, "${coord:latest(0)}");
    final Path coordPath1 = new Path(getFsTestCaseDir(), "coord1");
    writeCoordXml(coordPath1, "coord-multiple-input-instance4.xml");
    Configuration newConf = new Configuration();
    newConf.set(OozieClient.USER_NAME, getTestUser());
    CoordUpdateXCommand update = new CoordUpdateXCommand(false, newConf, coordJobId);
    update.call();
    job = getCoordJobs(coordJobId);
    processedJobXml = XmlUtils.parseXml(job.getJobXml());
    namespace = processedJobXml.getNamespace();
    text = ((Element) processedJobXml.getChild("input-events", namespace).getChild("data-in", namespace).getChildren("instance", namespace).get(0)).getText();
    assertEquals(text, "${coord:future(0, 1)}");
}
