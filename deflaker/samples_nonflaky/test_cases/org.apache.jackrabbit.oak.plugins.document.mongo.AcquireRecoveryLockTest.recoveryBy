// OAK-4131
@Test
public void recoveryBy() throws Exception {
    MongoMissingLastRevSeeker seeker = new MongoMissingLastRevSeeker(store, getTestClock());
    List<ClusterNodeInfoDocument> infoDocs = newArrayList(seeker.getAllClusters());
    assertEquals(1, infoDocs.size());
    int clusterId = infoDocs.get(0).getClusterId();
    int otherClusterId = clusterId + 1;
    getTestClock().waitUntil(getTestClock().getTime() + ClusterNodeInfo.DEFAULT_LEASE_DURATION_MILLIS + 1000);
    assertTrue(seeker.acquireRecoveryLock(clusterId, otherClusterId));
    ClusterNodeInfoDocument doc = seeker.getClusterNodeInfo(clusterId);
    Object recoveryBy = doc.get(ClusterNodeInfo.REV_RECOVERY_BY);
    assertNotNull(recoveryBy);
    assertEquals(Long.class, recoveryBy.getClass());
}
