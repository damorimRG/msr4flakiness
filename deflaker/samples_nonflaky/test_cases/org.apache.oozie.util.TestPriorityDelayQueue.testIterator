@Test
public void testIterator() throws Exception {
    PriorityDelayQueue<Integer> q = new PriorityDelayQueue<Integer>(3, 500, TimeUnit.MILLISECONDS, -1);
    q.offer(new TestQueueElement<Integer>(1, 1, 10, TimeUnit.MILLISECONDS));
    q.offer(new TestQueueElement<Integer>(10, 0, 0, TimeUnit.MILLISECONDS));
    q.offer(new TestQueueElement<Integer>(30, 2, 0, TimeUnit.MILLISECONDS));
    q.offer(new TestQueueElement<Integer>(20, 1, 0, TimeUnit.MILLISECONDS));
    assertEquals(4, q.size());
    assertNotNull(q.poll());
    assertNotNull(q.poll());
    q.offer(new TestQueueElement<Integer>(40, 0, 0, TimeUnit.MILLISECONDS));
    q.offer(new TestQueueElement<Integer>(50, 2, 0, TimeUnit.MILLISECONDS));
    q.offer(new TestQueueElement<Integer>(60, 1, 0, TimeUnit.MILLISECONDS));
    assertEquals(5, q.size());
    assertNotNull(q.poll());
    assertEquals(4, q.size());
}
