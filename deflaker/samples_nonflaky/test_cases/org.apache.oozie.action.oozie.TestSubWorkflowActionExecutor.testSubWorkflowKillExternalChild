public void testSubWorkflowKillExternalChild() throws Exception {
    try {
        LocalOozie.start();
        final String workflowUri = createSubWorkflowWithLazyAction(true);
        final OozieClient wfClient = LocalOozie.getClient();
        final String jobId = submitWorkflow(workflowUri, wfClient);
        final Configuration conf = Services.get().get(HadoopAccessorService.class).createConfiguration(getJobTrackerUri());
        waitForWorkflowToStart(wfClient, jobId);
        final ApplicationId externalChildJobId = getChildMRJobApplicationId(conf);
        killWorkflow(jobId);
        waitUntilYarnAppKilledAndAssertSuccess(externalChildJobId.toString());
    } finally {
        LocalOozie.stop();
    }
}
