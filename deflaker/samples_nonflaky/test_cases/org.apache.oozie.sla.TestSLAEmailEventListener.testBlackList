public void testBlackList() throws Exception {
    String blackListedEmail = "alert-receiver@oozie.com";
    // add email to blacklist
    slaEmailListener.addBlackList(blackListedEmail);
    String id = "0000000-000000000000001-oozie-wrkf-C@1";
    SLACalcStatus event = _createSLACalcStatus(id);
    SLARegistrationBean eventBean = event.getSLARegistrationBean();
    event.setEventStatus(EventStatus.START_MISS);
    eventBean.setAlertContact(blackListedEmail);
    eventBean.setAppType(AppType.COORDINATOR_ACTION);
    eventBean.setAppName("Test-SLA-Start-Miss");
    eventBean.setUser("dummyuser");
    eventBean.setAlertContact("alert-receiver@oozie.com");
    event.setActualStart(DateUtils.parseDateUTC("2013-01-01T01:00Z"));
    // blacklist blocks email from being sent out
    slaEmailListener.onStartMiss(event);
    MimeMessage[] msgs = greenMail.getReceivedMessages();
    assertEquals(msgs.length, 0);
    // wait 1.5 sec (cache timeout set to 1sec in test's setup)
    Thread.sleep(1500);
    // cache is evicted
    slaEmailListener.onStartMiss(event);
    msgs = greenMail.getReceivedMessages();
    assertEquals(msgs.length, 1);
}
