@Test
public void testMultipleDrainBufferCalls() throws IOException {
    Process process = BlockingWritesExitValueProcess.createFastWritingProcess("", "");
    final BufferDrainer bufferDrainer = new BufferDrainer(process, 0);
    bufferDrainer.drainBuffers();
    expectedException.expect(IllegalStateException.class);
    bufferDrainer.drainBuffers();
}
