/**
 * Test : purge succeeded wf job and action successfully. Creates and runs a
 * new job to completion. Attempts to purge jobs older than a day. Verifies
 * the presence of the job in the system. </p> Sets the end date for the
 * same job to make it qualify for the purge criteria. Calls the purge
 * command, and ensure the job does not exist in the system.
 *
 * @throws Exception if cannot insert records to the database
 */
public void testSucceededWorkflow() throws Exception {
    WorkflowJobBean job = addRecordToWfJobTable(WorkflowJob.Status.SUCCEEDED, WorkflowInstance.Status.SUCCEEDED);
    WorkflowActionBean action = addRecordToWfActionTable(job.getId(), "1", WorkflowAction.Status.OK);
    purgeWithDefaultParameters();
    assertWorkflowJobPurged(job);
    assertWorkflowActionPurged(action);
}
