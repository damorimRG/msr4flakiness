public void testXCommandLifecycleLockingFailingToLock() throws Exception {
    LockGetter t = new LockGetter();
    t.start();
    t.awaitLockAcquired();
    AXCommand command = new AXCommand(true);
    try {
        command.call();
        fail();
    } catch (CommandException ex) {
    } catch (Exception ex) {
    }
    assertTrue("Lock acquisition failed in the test thread", t.isLockSuccessful());
}
