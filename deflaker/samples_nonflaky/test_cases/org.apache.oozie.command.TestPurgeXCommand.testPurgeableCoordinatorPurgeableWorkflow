/**
 * Test : The workflow should get purged, and the coordinator parent should get purged --> both will get purged
 *
 * @throws Exception if cannot insert records to the database
 */
public void testPurgeableCoordinatorPurgeableWorkflow() throws Exception {
    CoordinatorJobBean coordJob = addRecordToCoordJobTable(CoordinatorJob.Status.SUCCEEDED, false, false);
    WorkflowJobBean wfJob = addRecordToWfJobTable(WorkflowJob.Status.SUCCEEDED, WorkflowInstance.Status.SUCCEEDED);
    WorkflowActionBean wfAction = addRecordToWfActionTable(wfJob.getId(), "1", WorkflowAction.Status.OK);
    CoordinatorActionBean coordAction = addRecordToCoordActionTable(coordJob.getId(), 1, CoordinatorAction.Status.SUCCEEDED, "coord-action-get.xml", wfJob.getId(), "SUCCEEDED", 0);
    purgeWithDefaultParameters();
    assertCoordinatorJobPurged(coordJob);
    assertCoordinatorActionPurged(coordAction);
    assertWorkflowJobPurged(wfJob);
    assertWorkflowActionPurged(wfAction);
}
