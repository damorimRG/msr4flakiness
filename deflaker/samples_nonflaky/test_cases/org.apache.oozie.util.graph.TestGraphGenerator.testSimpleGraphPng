public void testSimpleGraphPng() {
    try {
        assumeJDKVersion();
    } catch (final AssumptionViolatedException ave) {
        // Due to JUnit38ClassRunner we have to check that explicitly instead of relying on junit.framework
        LOG.warn(ave.getMessage());
        return;
    }
    final WorkflowJobBean jsonWFJob = createSimpleWorkflow();
    generateAndAssertPng(jsonWFJob, GRAPH_WORKFLOW_SIMPLE_XML, false);
    generateAndAssertPng(jsonWFJob, GRAPH_WORKFLOW_SIMPLE_XML, true);
    try {
        final String content = IOUtils.getResourceAsString(GRAPH_WORKFLOW_INVALID_XML, -1);
        final GraphGenerator g = new GraphGenerator(content, jsonWFJob, true, new GraphvizRenderer());
        g.write(new NullOutputStream(), OutputFormat.PNG);
    } catch (final Exception e) {
        Assert.fail("Write PNG shouldn't have failed for graph-workflow-invalid.xml call: " + e.getMessage());
    }
}
