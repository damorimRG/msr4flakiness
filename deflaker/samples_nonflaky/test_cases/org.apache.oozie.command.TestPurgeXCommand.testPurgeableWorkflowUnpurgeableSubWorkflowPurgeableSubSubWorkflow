/**
 * Test : The subsubworkflow should get purged,
 *        the subworkflow shouldn't get purged,
 *        the workflow parent should get purged --> neither will get purged
 *
 * @throws Exception if unable to create workflow job or action bean
 */
public void testPurgeableWorkflowUnpurgeableSubWorkflowPurgeableSubSubWorkflow() throws Exception {
    WorkflowJobBean wfJob = addRecordToWfJobTable(WorkflowJob.Status.SUCCEEDED, WorkflowInstance.Status.SUCCEEDED);
    WorkflowActionBean wfAction = addRecordToWfActionTable(wfJob.getId(), "1", WorkflowAction.Status.OK);
    WorkflowJobBean subwfJob = addRecordToWfJobTable(WorkflowJob.Status.RUNNING, WorkflowInstance.Status.RUNNING, wfJob.getId());
    WorkflowActionBean subwfAction = addRecordToWfActionTable(subwfJob.getId(), "1", WorkflowAction.Status.RUNNING);
    WorkflowJobBean subsubwfJob = addRecordToWfJobTable(WorkflowJob.Status.SUCCEEDED, WorkflowInstance.Status.SUCCEEDED, subwfJob.getId());
    WorkflowActionBean subsubwfAction = addRecordToWfActionTable(subsubwfJob.getId(), "1", WorkflowAction.Status.OK);
    purgeWithDefaultParameters();
    assertWorkflowJobNotPurged(wfJob);
    assertWorkflowActionNotPurged(wfAction);
    assertWorkflowJobNotPurged(subwfJob);
    assertWorkflowActionNotPurged(subwfAction);
    assertWorkflowJobNotPurged(subsubwfJob);
    assertWorkflowActionNotPurged(subsubwfAction);
}
