@Test
public void getAggregatedNamesWithCustom() throws Exception {
    PrivilegeManager pMgr = getPrivilegeManager(root);
    pMgr.registerPrivilege("test1", true, null);
    assertEquals(ImmutableSet.of("test1"), ImmutableSet.copyOf(bitsProvider.getAggregatedPrivilegeNames("test1")));
    Set<String> expected = Sets.newHashSet(NON_AGGREGATE_PRIVILEGES);
    expected.add("test1");
    assertEquals(expected, ImmutableSet.copyOf(bitsProvider.getAggregatedPrivilegeNames(JCR_ALL)));
    assertEquals(expected, ImmutableSet.copyOf(bitsProvider.getAggregatedPrivilegeNames(JCR_ALL)));
}
