@Test
public void testAgainstURIEncoded() throws Exception {
    // Check that the encoded URI generated by URI builder agrees with that generated by using URI directly
    final String scheme = "https";
    final String host = "localhost";
    // N.B. excludes \u00a3\u00ac\u00a6
    final String specials = "/ abcd!$&*()_-+.,=:;'~<>/@[]|#^%\"{}\\`xyz";
    final URI uri = new URI(scheme, specials, host, 80, specials, specials, specials);
    final URI bld = new URIBuilder().setScheme(scheme).setHost(host).setUserInfo(specials).setPath(specials).setCustomQuery(specials).setFragment(specials).build();
    Assert.assertEquals(uri.getHost(), bld.getHost());
    Assert.assertEquals(uri.getRawUserInfo(), bld.getRawUserInfo());
    Assert.assertEquals(uri.getRawPath(), bld.getRawPath());
    Assert.assertEquals(uri.getRawQuery(), bld.getRawQuery());
    Assert.assertEquals(uri.getRawFragment(), bld.getRawFragment());
}
