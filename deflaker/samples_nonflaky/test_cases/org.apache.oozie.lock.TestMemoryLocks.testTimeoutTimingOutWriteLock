public void testTimeoutTimingOutWriteLock() throws Exception {
    StringBuffer sb = new StringBuffer("");
    Locker l1 = new WriteLocker("a", 1, 0, sb);
    Locker l2 = new WriteLocker("a", 2, 50, sb);
    new Thread(l1).start();
    l1.awaitLockAcquire();
    new Thread(l2).start();
    l2.awaitStart();
    l2.proceed();
    // L2 will time out after 50ms
    l2.awaitTermination();
    l1.proceed();
    l1.awaitTermination();
    assertEquals("a:1-L a:2-N a:1-U", sb.toString().trim());
}
