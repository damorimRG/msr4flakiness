public void testResetSequence() throws Exception {
    SimpleDateFormat dateFormat = new SimpleDateFormat("yyMMddHHmmssSSS");
    Services service = Services.get();
    service.setService(ZKLocksService.class);
    ZKUUIDService uuid = new ZKUUIDService();
    try {
        setSystemProperty(UUIDService.CONF_GENERATOR, "counter");
        ZKUUIDService.setMaxSequence(900);
        uuid.init(service);
        String id = uuid.generateId(ApplicationType.WORKFLOW);
        Date d = dateFormat.parse(id.split("-")[1]);
        assertTrue(id.startsWith("0000000-"));
        for (int i = 0; i < 1000; i++) {
            id = uuid.generateId(ApplicationType.WORKFLOW);
        }
        assertTrue(id.startsWith("0000100-"));
        Date newDate = dateFormat.parse(id.split("-")[1]);
        assertTrue(newDate.after(d));
    } finally {
        uuid.destroy();
    }
}
