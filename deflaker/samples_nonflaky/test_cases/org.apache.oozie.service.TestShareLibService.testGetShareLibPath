@Test
public void testGetShareLibPath() throws Exception {
    FileSystem fs = getFileSystem();
    Path basePath = new Path(getOozieConfig().get(WorkflowAppService.SYSTEM_LIB_PATH));
    // Use timedstamped directory if available
    Date time = new Date(System.currentTimeMillis());
    Path libpath = new Path(basePath, ShareLibService.SHARE_LIB_PREFIX + ShareLibService.dt.get().format(time));
    fs.mkdirs(libpath);
    Path pigPath = new Path(libpath.toString() + Path.SEPARATOR + "pig");
    Path pigPath1 = new Path(libpath.toString() + Path.SEPARATOR + "pig_9");
    Path pigPath2 = new Path(libpath.toString() + Path.SEPARATOR + "pig_10");
    fs.mkdirs(pigPath);
    fs.mkdirs(pigPath1);
    fs.mkdirs(pigPath2);
    services.init();
    ShareLibService shareLibService = Services.get().get(ShareLibService.class);
    assertNotNull(shareLibService.getShareLibJars("pig"));
    assertNotNull(shareLibService.getShareLibJars("pig_9"));
    assertNotNull(shareLibService.getShareLibJars("pig_10"));
    assertNull(shareLibService.getShareLibJars("pig_11"));
}
