@Test
public void testFailure() {
    final BlockingWritesExitValueProcess process = BlockingWritesExitValueProcess.createFastWritingProcess("", "");
    assertEquals("Invalid exit value", BlockingWritesExitValueProcess.EXIT_VALUE, process.exitValue());
    process.simulateFailure();
    expectedException.expect(IllegalThreadStateException.class);
    process.exitValue();
}
