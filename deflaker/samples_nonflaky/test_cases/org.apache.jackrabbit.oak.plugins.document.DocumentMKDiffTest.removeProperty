@Test
public void removeProperty() {
    String rev0 = mk.commit("/", "+\"level1\":{ \"prop1\" : \"value\"}", null, null);
    assertTrue(mk.nodeExists("/level1", null));
    JSONObject obj = parseJSONObject(mk.getNodes("/level1", null, 0, 0, -1, null));
    assertPropertyExists(obj, "prop1");
    // Remove property
    String rev1 = mk.commit("/", "^\"level1/prop1\" : null", null, null);
    assertTrue(mk.nodeExists("/level1", null));
    obj = parseJSONObject(mk.getNodes("/level1", null, 0, 0, -1, null));
    assertPropertyNotExists(obj, "prop1");
    // Generate reverseDiff from rev1 to rev0
    String reverseDiff = mk.diff(rev1, rev0, "/level1", 0);
    assertNotNull(reverseDiff);
    assertTrue(reverseDiff.length() > 0);
    // Commit the reverseDiff and check property is added back.
    mk.commit("", reverseDiff, null, null);
    obj = parseJSONObject(mk.getNodes("/level1", null, 0, 0, -1, null));
    assertPropertyExists(obj, "prop1");
}
