public void testRegisterUnregister() throws Exception {
    assertEquals(0, ZKUtils.getUsers().size());
    ZKXLogStreamingService zkxlss = new ZKXLogStreamingService();
    try {
        zkxlss.init(Services.get());
        assertEquals(1, ZKUtils.getUsers().size());
        assertEquals(zkxlss, ZKUtils.getUsers().iterator().next());
        zkxlss.destroy();
        assertEquals(0, ZKUtils.getUsers().size());
    } finally {
        zkxlss.destroy();
    }
}
