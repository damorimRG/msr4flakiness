@Test
public void testGetHCatConfLocal() throws Exception {
    File hcatConfFile = new File(getTestCaseConfDir(), "hive-site.xml");
    assertFalse(hcatConfFile.exists());
    assertNull(services.get(HCatAccessorService.class).getHCatConf());
    Configuration hcatConf = new Configuration(false);
    hcatConf.set("A", "a");
    hcatConf.writeXml(new FileOutputStream(hcatConfFile));
    assertTrue(hcatConfFile.exists());
    services.destroy();
    services = super.setupServicesForHCatalog();
    Configuration conf = services.getConf();
    conf.set("oozie.service.HCatAccessorService.hcat.configuration", hcatConfFile.getAbsolutePath());
    services.init();
    Configuration hcatConfLoaded = services.get(HCatAccessorService.class).getHCatConf();
    assertEquals("a", hcatConfLoaded.get("A"));
}
