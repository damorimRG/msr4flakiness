public void testCredentialsSkip() throws Exception {
    // providerCache must be re-initialized
    CredentialsProviderFactory.destroy();
    // Try setting oozie.credentials.skip at different levels, and verifying the correct behavior
    // oozie-site: false -- job-level: null -- action-level: null
    _testCredentialsSkip(false, null, null, true);
    // oozie-site: false -- job-level: null -- action-level: false
    _testCredentialsSkip(false, null, "false", true);
    // oozie-site: false -- job-level: null -- action-level: true
    _testCredentialsSkip(false, null, "true", false);
    // oozie-site: false -- job-level: false -- action-level: null
    _testCredentialsSkip(false, "false", null, true);
    // oozie-site: false -- job-level: false -- action-level: false
    _testCredentialsSkip(false, "false", "false", true);
    // oozie-site: false -- job-level: false -- action-level: true
    _testCredentialsSkip(false, "false", "true", false);
    // oozie-site: false -- job-level: true -- action-level: null
    _testCredentialsSkip(false, "true", null, false);
    // oozie-site: false -- job-level: true -- action-level: false
    _testCredentialsSkip(false, "true", "false", true);
    // oozie-site: false -- job-level: true -- action-level: true
    _testCredentialsSkip(false, "true", "true", false);
    // oozie-site: true -- job-level: null -- action-level: null
    _testCredentialsSkip(true, null, null, false);
    // oozie-site: true -- job-level: null -- action-level: false
    _testCredentialsSkip(true, null, "false", true);
    // oozie-site: true -- job-level: null -- action-level: true
    _testCredentialsSkip(true, null, "true", false);
    // oozie-site: true -- job-level: false -- action-level: null
    _testCredentialsSkip(true, "false", null, true);
    // oozie-site: true -- job-level: false -- action-level: false
    _testCredentialsSkip(true, "false", "false", true);
    // oozie-site: true -- job-level: false -- action-level: true
    _testCredentialsSkip(true, "false", "true", false);
    // oozie-site: true -- job-level: true -- action-level: null
    _testCredentialsSkip(true, "true", null, false);
    // oozie-site: true -- job-level: true -- action-level: false
    _testCredentialsSkip(true, "true", "false", true);
    // oozie-site: true -- job-level: true -- action-level: true
    _testCredentialsSkip(true, "true", "true", false);
}
