@Test(expected = IllegalArgumentException.class)
public void testCreateFromInvalidTree() throws Exception {
    Tree t = when(mock(Tree.class).getProperty(JCR_PRIMARY_TYPE)).thenReturn(PropertyStates.createProperty(JCR_PRIMARY_TYPE, NT_REP_GROUP, Type.NAME)).getMock();
    User u = new UserImpl("uid", t, (UserManagerImpl) getUserManager(root));
}
