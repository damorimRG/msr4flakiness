public void testActionSharelibConfigPropagation() throws Exception {
    final String globalConfigForJavaSharelib = "<global><configuration><property>" + "<name>oozie.action.sharelib.for.java</name><value>globalJavaConfigSharelib</value>" + "</property></configuration></global>";
    final String globalLauncherWithSharelib = "<global><launcher>" + "<sharelib>globalLauncherSharelib</sharelib>" + "</launcher></global>";
    final String globalLauncherAndConfigWithSharelib = "<global><launcher>" + "<sharelib>globalLauncherSharelib</sharelib>" + "</launcher><configuration><property>" + "<name>oozie.action.sharelib.for.java</name><value>globalJavaConfigSharelib</value>" + "</property></configuration></global>";
    final String localConfigForJavaSharelib = "<configuration><property>" + "<name>oozie.action.sharelib.for.java</name><value>localJavaConfigSharelib</value>" + "</property></configuration>";
    final String localLauncherWithSharelib = "<launcher>" + "<sharelib>localLauncherSharelib</sharelib>" + "</launcher>";
    launchJavaActionAndValidateSharelibValues("", "", null, null);
    launchJavaActionAndValidateSharelibValues(globalConfigForJavaSharelib, "", "globalJavaConfigSharelib", null);
    launchJavaActionAndValidateSharelibValues(globalLauncherWithSharelib, "", null, "globalLauncherSharelib");
    launchJavaActionAndValidateSharelibValues(globalLauncherAndConfigWithSharelib, localConfigForJavaSharelib, "localJavaConfigSharelib", "globalLauncherSharelib");
    launchJavaActionAndValidateSharelibValues(globalLauncherAndConfigWithSharelib, localLauncherWithSharelib, "globalJavaConfigSharelib", "localLauncherSharelib");
    launchJavaActionAndValidateSharelibValues(globalLauncherAndConfigWithSharelib, localLauncherWithSharelib + localConfigForJavaSharelib, "localJavaConfigSharelib", "localLauncherSharelib");
}
