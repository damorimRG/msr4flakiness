public void testContentType() throws Exception {
    StringBuilder elem = new StringBuilder();
    elem.append("<email xmlns=\"uri:oozie:email-action:0.2\">");
    elem.append("<to>purushah@yahoo-inc.com</to>");
    elem.append("<subject>sub</subject>");
    elem.append("<content_type>text/html</content_type>");
    elem.append("<body>&lt;body&gt; This is a test mail &lt;/body&gt;</body>");
    elem.append("</email>");
    EmailActionExecutor emailContentType = new EmailActionExecutor();
    emailContentType.validateAndMail(createAuthContext("email-action"), XmlUtils.parseXml(elem.toString()));
    assertEquals("<body> This is a test mail </body>", GreenMailUtil.getBody(server.getReceivedMessages()[0]));
    assertTrue(server.getReceivedMessages()[0].getContentType().contains("text/html"));
}
