@Test
public void testGetPrimaryTypeNameNotAccessible() throws Exception {
    Tree tree = root.getTree("/");
    String expected = TreeUtil.getPrimaryTypeName(tree);
    try (ContentSession cs = login(new GuestCredentials())) {
        Root r = cs.getLatestRoot();
        assertNull(TreeUtil.getPrimaryTypeName(r.getTree("/")));
        assertEquals(expected, TreeUtil.getPrimaryTypeName(r.getTree("/"), new LazyValue<Tree>() {

            @Override
            protected Tree createValue() {
                return tree;
            }
        }));
    }
}
