@Test
public void testDrainBuffersShortProcess() throws Exception {
    checkSampleStringWithDifferentMaxLength(new StringAndIntProcessingCallback() {

        public void call(String sampleString, int suggestedMaxLength) throws IOException {
            checkDrainBuffers(2, sampleString, "", suggestedMaxLength);
            checkDrainBuffers(2, "", sampleString.toLowerCase(), suggestedMaxLength);
            checkDrainBuffers(2, sampleString, sampleString.toLowerCase(), suggestedMaxLength);
        }
    });
}
