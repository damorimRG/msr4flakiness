// Check status change - with multiple option. Pause can't be applied to killed job, old behavior.
public void testCoord_throwException() throws Exception {
    Date start = new Date();
    // 4 hrs
    Date end = new Date(start.getTime() + (4 * HOURS_IN_MS));
    String status = "status=RUNNING;pausetime=" + DateUtils.formatDateOozieTZ(end);
    final CoordinatorJobBean job = addRecordToCoordJobTableForPauseTimeTest(CoordinatorJob.Status.KILLED, start, end, end, true, false, 4);
    addRecordToCoordActionTable(job.getId(), 1, CoordinatorAction.Status.SUCCEEDED, "coord-action-get.xml", 0);
    addRecordToCoordActionTable(job.getId(), 2, CoordinatorAction.Status.SUCCEEDED, "coord-action-get.xml", 0);
    addRecordToCoordActionTable(job.getId(), 3, CoordinatorAction.Status.RUNNING, "coord-action-get.xml", 0);
    addRecordToCoordActionTable(job.getId(), 4, CoordinatorAction.Status.RUNNING, "coord-action-get.xml", 0);
    try {
        new CoordChangeXCommand(job.getId(), status).call();
        fail("should throw Exception");
    } catch (CommandException e) {
        assertTrue(e.getMessage().contains("Cannot change a killed coordinator job"));
    }
}
