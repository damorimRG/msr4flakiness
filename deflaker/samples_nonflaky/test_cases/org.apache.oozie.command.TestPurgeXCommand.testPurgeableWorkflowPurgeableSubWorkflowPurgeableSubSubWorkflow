/**
 * Test : The subsubworkflows should get purged,
 *        the subworkflow should get purged,
 *        the workflow parent should get purged --> all will get purged
 *
 * @throws Exception if unable to create workflow job or action bean
 */
public void testPurgeableWorkflowPurgeableSubWorkflowPurgeableSubSubWorkflow() throws Exception {
    WorkflowJobBean wfJob = addRecordToWfJobTable(WorkflowJob.Status.SUCCEEDED, WorkflowInstance.Status.SUCCEEDED);
    WorkflowActionBean wfAction = addRecordToWfActionTable(wfJob.getId(), "1", WorkflowAction.Status.OK);
    WorkflowJobBean subwfJob = addRecordToWfJobTable(WorkflowJob.Status.SUCCEEDED, WorkflowInstance.Status.SUCCEEDED, wfJob.getId());
    WorkflowActionBean subwfAction = addRecordToWfActionTable(subwfJob.getId(), "1", WorkflowAction.Status.OK);
    WorkflowJobBean subsub1wfJob = addRecordToWfJobTable(WorkflowJob.Status.SUCCEEDED, WorkflowInstance.Status.SUCCEEDED, subwfJob.getId());
    WorkflowJobBean subsub2wfJob = addRecordToWfJobTable(WorkflowJob.Status.SUCCEEDED, WorkflowInstance.Status.SUCCEEDED, subwfJob.getId());
    WorkflowActionBean subsub1wfAction = addRecordToWfActionTable(subsub1wfJob.getId(), "1", WorkflowAction.Status.OK);
    WorkflowActionBean subsub2wfAction = addRecordToWfActionTable(subsub2wfJob.getId(), "1", WorkflowAction.Status.OK);
    purgeWithDefaultParameters();
    assertWorkflowJobPurged(wfJob);
    assertWorkflowActionPurged(wfAction);
    assertWorkflowJobPurged(subwfJob);
    assertWorkflowActionPurged(subwfAction);
    assertWorkflowJobPurged(subsub1wfJob);
    assertWorkflowJobPurged(subsub2wfJob);
    assertWorkflowActionPurged(subsub1wfAction);
    assertWorkflowActionPurged(subsub2wfAction);
}
