public void testDefaultConfigurationInActionConf() throws Exception {
    JavaActionExecutor ae = new JavaActionExecutor();
    final String dummyConfiguration = "<configuration>" + "<property><name>action.foo</name><value>AA</value></property>" + "</configuration>";
    String xmlStr = helper.getJavaActionXml(dummyConfiguration);
    Element actionXml = XmlUtils.parseXml(xmlStr);
    Context context = createContext(xmlStr, getTestGroup());
    Configuration conf = new Configuration(true);
    conf.set(YARN_RESOURCEMANAGER_ADDRESS, getJobTrackerUri());
    assertEquals("MapReduce's default value changed", "4", conf.get("mapreduce.map.maxattempts"));
    ae.setupActionConf(conf, context, actionXml, new Path(context.getWorkflow().getAppPath()));
    assertEquals("failed to inject property >action.foo<", "AA", conf.get("action.foo"));
    assertEquals("failed to inject property >oozie.launcher.action.foofoo<", "action.barbar", conf.get("oozie.launcher.action.foofoo"));
    assertEquals("Maxattempts should've been overwritten by setupActionConf", "1", conf.get("mapreduce.map.maxattempts"));
}
