public void testWhenSLARegistrationIsUpdatedBeanIsStoredCorrectly() throws Exception {
    SLACalculatorMemory slaCalcMemory = new SLACalculatorMemory();
    slaCalcMemory.init(Services.get().get(ConfigurationService.class).getConf());
    final String jobId = "job-1-W";
    SLARegistrationBean slaRegBean = _createSLARegistration(jobId, AppType.WORKFLOW_JOB);
    SLARegistrationBean slaRegBean2 = _createSLARegistration(jobId, AppType.WORKFLOW_JOB);
    addAndUpdateRegistration(slaCalcMemory, jobId, slaRegBean, slaRegBean2);
    Assert.assertNotNull(slaCalcMemory.get(jobId));
    Assert.assertEquals("The updated SLA registration bean should be in the cache", slaRegBean2, slaCalcMemory.get(jobId).getSLARegistrationBean());
}
