public void testReadDefinition() throws Exception {
    Services services = new Services();
    try {
        services.init();
        Reader reader = IOUtils.getResourceAsReader("wf-schema-valid.xml", -1);
        Writer writer = new OutputStreamWriter(new FileOutputStream(new File(getTestCaseDir(), "workflow.xml")), StandardCharsets.UTF_8);
        IOUtils.copyCharStream(reader, writer);
        Configuration conf = new XConfiguration();
        WorkflowAppService wps = services.get(WorkflowAppService.class);
        String wfDef = wps.readDefinition(getTestCaseFileUri("workflow.xml"), getTestUser(), conf);
        assertNotNull(reader.toString(), wfDef);
    } finally {
        services.destroy();
    }
}
