@Test
public void testOuterAttemptRemainsUnfinishedWhenInnerExhausted() throws InterruptedException {
    final NestedAttempt inner = new NestedAttempt(true);
    final NestedAttempt outer = new NestedAttempt(inner, false);
    outer.run();
    assertTrue("retry attempts exhausted", state.isExhausted());
    assertEquals("retry attempt count", 1, state.getInProgressCount());
}
