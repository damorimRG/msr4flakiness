@Test
public void testConfigWrite() throws IOException {
    File f = new File(tmp.newFolder(), "nonExistentFile");
    assertFalse(f.exists());
    try (FileOutputStream fos = LauncherMain.createStreamIfFileNotExists(f)) {
        Configuration c = new Configuration(false);
        c.set("foo", "bar");
        c.writeXml(fos);
    }
    String contents = new String(Files.readAllBytes(f.toPath()), StandardCharsets.UTF_8);
    assertTrue(contents.contains("foo"));
    assertTrue(contents.contains("bar"));
    assertTrue(contents.contains("<configuration>"));
    assertTrue(contents.contains("<property"));
}
