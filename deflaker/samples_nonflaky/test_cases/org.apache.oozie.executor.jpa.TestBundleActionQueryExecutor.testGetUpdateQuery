public void testGetUpdateQuery() throws Exception {
    EntityManager em = jpaService.getEntityManager();
    BundleJobBean job = this.addRecordToBundleJobTable(Job.Status.RUNNING, false);
    BundleActionBean bundleAction = this.addRecordToBundleActionTable(job.getId(), "action1", 1, Job.Status.PREP);
    // UPDATE_BUNDLE_ACTION_PENDING_MODTIME
    Query query = BundleActionQueryExecutor.getInstance().getUpdateQuery(BundleActionQuery.UPDATE_BUNDLE_ACTION_PENDING_MODTIME, bundleAction, em);
    assertEquals(query.getParameterValue("lastModifiedTime"), bundleAction.getLastModifiedTimestamp());
    assertEquals(query.getParameterValue("pending"), bundleAction.getPending());
    assertEquals(query.getParameterValue("bundleActionId"), bundleAction.getBundleActionId());
    // UPDATE_BUNDLE_ACTION_STATUS_PENDING_MODTIME:
    query = BundleActionQueryExecutor.getInstance().getUpdateQuery(BundleActionQuery.UPDATE_BUNDLE_ACTION_STATUS_PENDING_MODTIME_COORDID, bundleAction, em);
    assertEquals(query.getParameterValue("status"), bundleAction.getStatus().toString());
    assertEquals(query.getParameterValue("lastModifiedTime"), bundleAction.getLastModifiedTimestamp());
    assertEquals(query.getParameterValue("pending"), bundleAction.getPending());
    assertEquals(query.getParameterValue("coordId"), bundleAction.getCoordId());
    assertEquals(query.getParameterValue("bundleActionId"), bundleAction.getBundleActionId());
    // UPDATE_BUNDLE_ACTION_STATUS_PENDING_MODTIME_COORDID
    query = BundleActionQueryExecutor.getInstance().getUpdateQuery(BundleActionQuery.UPDATE_BUNDLE_ACTION_STATUS_PENDING_MODTIME_COORDID, bundleAction, em);
    assertEquals(query.getParameterValue("status"), bundleAction.getStatus().toString());
    assertEquals(query.getParameterValue("lastModifiedTime"), bundleAction.getLastModifiedTimestamp());
    assertEquals(query.getParameterValue("pending"), bundleAction.isPending() ? 1 : 0);
    assertEquals(query.getParameterValue("coordId"), bundleAction.getCoordId());
    assertEquals(query.getParameterValue("bundleActionId"), bundleAction.getBundleActionId());
    em.close();
}
