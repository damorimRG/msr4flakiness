public void testRegisterUnregister() throws Exception {
    assertEquals(0, ZKUtils.getUsers().size());
    ZKLocksService zkls = new ZKLocksService();
    try {
        zkls.init(Services.get());
        assertEquals(1, ZKUtils.getUsers().size());
        assertEquals(zkls, ZKUtils.getUsers().iterator().next());
        zkls.destroy();
        assertEquals(0, ZKUtils.getUsers().size());
    } finally {
        zkls.destroy();
    }
}
