
getNodeStore
asTrunkRevision
 1. Create branch commits on both cluster nodes
assertFalse
commit
^"foo":1
brev1
brev2
branch
getUncommittedRevisions
testStore
purgeUnmergedBranch
mk1
getClusterId
mk2
assertTrue
branchRev1
branchRev2
RevisionVector
 2. Assert that branch rev are uncommited
create
rev2
/child2
rev1
/child1
getRevision
 4. Assert that post restart unmerged branch rev for c1 are purged
containsKey
+"/child1":{}
+"/child2":{}
revs2
revs1
cId2
dispose
fromString
 3. Restart cluster 1 so that purge happens but only for cluster 1
cId1
