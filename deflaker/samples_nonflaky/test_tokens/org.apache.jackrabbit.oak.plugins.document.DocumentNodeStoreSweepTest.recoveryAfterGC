getVersionGarbageCollector
/foo/node-0/bar
SplitOperations
waitUntil
bar
getClusterId
assertNotNull
find
merge
TimeUnit
toMillis
getRevision
getLocalRevisions
forDocument
createOrUpdate
assertNodeExists
 wait an hour
node-0
containsKey
node-
runBackgroundOperations
recoveryAfterGC
clock
NO_BINARY
 there must be an operation for a split doc
ops
 and nodes must still exist
/foo/node-
doc
Collection
prevId
child
 root document must contain a revisions entry for this commit
crashDocumentNodeStore
createDocumentNodeStore
 run GC
ns
getTime
foo
getId
clusterId
 simulate a crashed node store
 split the root
 do some other changes not followed by background update
assertTrue
 store must be clean after restart
 now the split document must be gone
builder
getRootDocument
getRoot
gc
op
getHeadRevision
store
isPreviousDocId
r
assertNull
assertCleanStore
Utils
