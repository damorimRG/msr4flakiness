freeSpace
ServerConfiguration
when
put
/a
getStoreMeta
/b
/c
 Run the space reserver once.
blockWorker
thenReturn
Sessions
 100 * 0.2 = 20
usedCapacityBytesOnTiers
newFolder
Matchers
eq
execute
ImmutableMap
capacityBytesOnTiers
HeartbeatScheduler
tmpFolderPath
/
testHighWatermark
never
getUsedBytesOnTiers
MEM
anyLong
mock
 200 * 0.3 + 100 * 0.2 = 80
submit
spaceReserver
 Create two tiers named "MEM", "SSD" and "HDD" with aliases 0, 1 and 2.
HDD
global
getCapacityBytesOnTiers
storeMeta
toResource
mUserState
of
HeartbeatContext
verify
mExecutorService
c
SSD
getAbsolutePath
 1000 * 0.4 + 200 * 0.3 + 100 * 0.2 = 480
0.6
0.7
mTempFolder
0.8
0.9
TieredBlockStoreTestUtils
setupConfWithMultiTier
PropertyKey
