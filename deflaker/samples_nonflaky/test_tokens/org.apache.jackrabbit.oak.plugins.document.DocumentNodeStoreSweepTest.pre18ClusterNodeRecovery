 wait for lease to expire
ns
getTime
getSweepRevisions
waitUntil
clusterId
 simulate a crashed node store
ClusterNodeInfo
 add a node, but do not run background write
getClusterId
assertTrue
assertNotNull
 must not set a sweep revision
merge
builder
_sweepRev
getRootDocument
getRoot
getLastRevRecoveryAgent
 then run recovery for the other cluster node
pre18ClusterNodeRecovery
getRevision
Path
op
getIdFromPath
recover
 start a new node store with a different clusterId
 this will look like an upgraded and crashed pre 1.8 node store
removeMapEntry
store
clock
node
assertNull
rootDoc
Collection
createUncommittedChanges
findAndUpdate
child
crashDocumentNodeStore
createDocumentNodeStore
