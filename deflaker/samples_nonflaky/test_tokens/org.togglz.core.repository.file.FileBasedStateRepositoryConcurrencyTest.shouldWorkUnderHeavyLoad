 Step 1: concurrently write a large number of state
some-value-of-
MapEntry
submit
repo
getParameterMap
run
 queue a thread writing that state
getStrategyId
param-of-
feature
executor
 read the state
setParameter
setFeatureState
TimeUnit
awaitTermination
 Step 2: Wait for all threads to finish
state
isNotNull
setStrategyId
 verify that the state is as expected
assertThat
getFeatureState
shouldWorkUnderHeavyLoad
testFile
entry
hasSize
contains
 Step 3: Verify the state written to the repository
FEATURE
name
 build up a feature state containing some data
NUMBER_OF_FEATURES
strategy-for-
isEqualTo
shutdown
