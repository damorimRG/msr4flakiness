cancel
realFuture
heartbeat
assertFalse
getInternalState
getClusterConf
when
removeHeartbeat
getUserState
 Make sure the future is canceled afterwards
assertTrue
assertNotNull
MetricsHeartbeatContext
create
client
verify
addHeartbeat
map
MasterInquireClient
 Scheduled indefinitely
thenReturn
ctx
forEach
ClientContext
isEmpty
testCancelFuture
any
isDone
Whitebox
getContextMap
mMetricsMasterHeartbeatTask
 Cancel the real one once replaced with a mock.
Mockito
future
 Should be created and scheduled
mock
setInternalState
