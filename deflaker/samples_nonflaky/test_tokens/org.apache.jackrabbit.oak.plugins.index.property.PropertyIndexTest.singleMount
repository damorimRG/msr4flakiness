before
/oak:index/foo
b/x
/oak:index/foo/:index
 Add index definition
/a
getMountByName
hook
/b
ImmutableSet
fooMount
find
/m
Mounts
INDEX_DEFINITIONS_NAME
indexed
index
 Add some content and process it through the property index hook
createFilter
ghi
/m/n
mount
/a/x
processCommit
INITIAL_CONTENT
setProperty
pathInIndex
child
 Separate node for mount
foo
createIndexDefinition
assertFalse
 Query the index
a/x
m/n
 Index entries for paths in foo mount should go to :oak:foo-index
mip
assertTrue
root
of
/m/n/o
builder
after
CommitInfo
defMount
a
lookup
b
abc
 All other index entries should go to :index
f
getNodeForMount
assertEquals
/b/x
m
newBuilder
n
o
/oak:index/foo/
getNodeState
with
entryCount
build
exists
singleMount
m/n/o
getNode
NT_BASE
getDefaultMount
