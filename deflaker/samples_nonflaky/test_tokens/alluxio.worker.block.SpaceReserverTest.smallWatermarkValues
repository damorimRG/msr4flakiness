smallWatermarkValues
freeSpace
ServerConfiguration
 100 * 0.7 = 70
when
put
/a
getStoreMeta
/b
/c
 Run the space reserver once.
blockWorker
thenReturn
Sessions
 1000 * 0.1 + 200 = 300
usedCapacityBytesOnTiers
newFolder
Matchers
eq
execute
ImmutableMap
capacityBytesOnTiers
HeartbeatScheduler
tmpFolderPath
/
never
getUsedBytesOnTiers
MEM
anyLong
mock
submit
spaceReserver
 Create two tiers named "MEM", "SSD" and "HDD" with aliases 0, 1 and 2.
HDD
global
getCapacityBytesOnTiers
 200 * 0.8 + 100 * 0.7 = 230 -> 200
storeMeta
toResource
mUserState
of
HeartbeatContext
verify
mExecutorService
c
SSD
getAbsolutePath
0.1
0.2
0.3
0.4
mTempFolder
TieredBlockStoreTestUtils
setupConfWithMultiTier
PropertyKey
