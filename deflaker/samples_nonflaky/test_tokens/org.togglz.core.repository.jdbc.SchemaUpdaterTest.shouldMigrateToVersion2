SELECT FEATURE_NAME, FEATURE_USERS FROM TOGGLZ ORDER BY FEATURE_NAME
querySucceeds
 insert two feature states
 migrate the schema
assertFalse
INSERT INTO TOGGLZ VALUES ('F1', 1, 'ck, admin')
update
dataBefore
DefaultMapSerializer
updater
INSERT INTO TOGGLZ VALUES ('F3', 1, NULL)
SELECT FEATURE_NAME,STRATEGY_ID,STRATEGY_PARAMS FROM TOGGLZ
INSERT INTO TOGGLZ VALUES ('F2', 1, '')
trim
assertTrue
get
 check 3 features are there after the migration
connection
SELECT FEATURE_USERS FROM TOGGLZ
doesTableExist
 check the new columns are present
migrateToVersion1
migrateToVersion2
 first feature is migrated
users=ck, admin
query
createConnection
 second feature didn't change
assertEquals
shouldMigrateToVersion2
F1
F2
F3
SELECT FEATURE_NAME, STRATEGY_ID, STRATEGY_PARAMS FROM TOGGLZ ORDER BY FEATURE_NAME
 create schema version 1
size
ck, admin
DbUtils
 check the old users column is deleted
multiline
TOGGLZ
dataAfter
toString
closeQuietly
UsernameActivationStrategy
isSchemaVersion1
