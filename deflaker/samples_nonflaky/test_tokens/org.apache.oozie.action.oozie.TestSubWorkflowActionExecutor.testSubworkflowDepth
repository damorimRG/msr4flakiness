LocalOozie
conf
<kill name="fail">
getStatus
 All should be KILLED because our infinitly recusrive workflow hit the max
 Set the max depth to 3
</workflow-app>
create
</app-path>
workflow.xml
write
waitFor
     </sub-workflow>
testSubworkflowDepth
wfClient
StandardCharsets
destroy
getFileSystem
     <error to="fail"/>
setInt
OozieClient
</kill>
appStr
stop
setProperty
 Infinitly recursive workflow
createConfiguration
<end name="end"/>
evaluate
          <app-path>
     <message>Sub workflow failed, error message[${wf:errorMessage(wf:lastErrorNode())}]</message>
submit
 A fourth subworkflow shouldn't have been created because we set the max to 3
getJobInfo
getActions
getExternalId
fs
jobId3
jobId2
jobId1
jobId0
</action>
get
jobId4
WorkflowJob
close
<action name="subwf">
getConf
XLogService
start
subWorkflowAppPath
assertEquals
oozie-log4j.properties
getClient
     <ok to="end"/>
     <sub-workflow xmlns='uri:oozie:workflow:0.4'>
oozie.action.subworkflow.max.depth
Services
getTestUser
assertNull
setSystemProperty
<workflow-app xmlns="uri:oozie:workflow:0.4" name="workflow">
toString
writer
<start to="subwf"/>
getFsTestCaseDir
